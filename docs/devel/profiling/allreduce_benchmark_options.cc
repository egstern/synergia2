#include "allreduce_benchmark_options.h"
#include "synergia/utils/command_line_arg.h"

// this file was automatically generated by the command
//     synergia allreduce_benchmark_options.py --create-cxx-options-source
// DO NOT EDIT

Allreduce_benchmark_options::Allreduce_benchmark_options(int argc, char **argv) :
    iterations(20),
    gridnum(32)
{
    for (int i = 1; i < argc; ++i) {
        Command_line_arg arg(argv[i]);
        if (arg.is_equal_pair()) {
            if (arg.get_lhs() == "iterations") {
                iterations = arg.extract_value<int >();
            } else if (arg.get_lhs() == "gridnum") {
                gridnum = arg.extract_value<int >();
            } else if (arg.get_lhs() == "synergia_executable") {
                // ignore
            } else if (arg.get_lhs() == "run") {
                // ignore
            } else if (arg.get_lhs() == "submit") {
                // ignore
            } else if (arg.get_lhs() == "overwrite") {
                // ignore
            } else if (arg.get_lhs() == "numproc") {
                // ignore
            } else if (arg.get_lhs() == "procspernode") {
                // ignore
            } else if (arg.get_lhs() == "jobdir") {
                // ignore
            } else {
                throw std::runtime_error("Unknown argument " + arg.get_lhs());
            }
        } else {
            throw std::runtime_error("Bad argument " + std::string(argv[i]));
        }
    }
}
